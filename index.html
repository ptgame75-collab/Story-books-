<!DOCTYPE html>
<html lang="ne">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ludo Prank Master</title>
    <link rel="manifest" href="manifest.json">
    <style>
        :root {
            --red: #e74c3c; --green: #2ecc71; --yellow: #f1c40f; --blue: #3498db;
            --white: #ffffff; --black: #2c3e50;
        }
        body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; background: #fcecd5; margin: 0; }
        
        .logo-box { width: 70px; height: 70px; margin: 10px; border-radius: 12px; border: 2px solid #000; overflow: hidden; box-shadow: 0 4px 8px rgba(0,0,0,0.3); }
        .logo-box img { width: 100%; height: 100%; object-fit: cover; }

        .ludo-board {
            display: grid; grid-template-columns: repeat(15, 1fr); grid-template-rows: repeat(15, 1fr);
            width: 95vw; max-width: 400px; height: 95vw; max-height: 400px;
            border: 4px solid #000; background: white; position: relative;
        }

        .cell { border: 0.1px solid #ccc; position: relative; box-sizing: border-box; }
        .base { grid-column: span 6; grid-row: span 6; border: 1px solid #000; position: relative; }
        .red { background: var(--red); } .green { background: var(--green); }
        .blue { background: var(--blue); } .yellow { background: var(--yellow); }
        .center { grid-column: 7/10; grid-row: 7/10; background: #ddd; border: 1px solid #000; }

        /* Tokens */
        .token {
            width: 18px; height: 18px; border-radius: 50%; border: 2px solid #fff;
            position: absolute; z-index: 100; cursor: pointer; transition: all 0.2s cubic-bezier(0.18, 0.89, 0.32, 1.28);
            box-shadow: 0 2px 4px rgba(0,0,0,0.4);
        }
        .green-t { background: #006400; border-color: #90ee90; }
        .red-t { background: #8b0000; border-color: #ffcccb; }

        /* Dice */
        #dice-box {
            width: 70px; height: 70px; background: white; border: 3px solid #000;
            border-radius: 12px; margin: 15px auto; display: flex;
            justify-content: center; align-items: center; font-size: 2.5rem;
            cursor: pointer; font-weight: bold; box-shadow: 0 5px 10px rgba(0,0,0,0.2);
        }
        .rolling { animation: roll-anim 0.2s infinite; }
        @keyframes roll-anim { 0% {transform: rotate(0)} 50% {transform: rotate(15deg)} 100% {transform: rotate(-15deg)} }
        
        .controls { text-align: center; margin-bottom: 20px; }
        #status-msg { font-size: 1.1rem; font-weight: bold; margin-bottom: 5px; }
    </style>
</head>
<body>

    <div class="logo-box"><img src="logo.png" onerror="this.src='https://via.placeholder.com/80?text=LUDO'" alt="Logo"></div>

    <div class="ludo-board" id="board">
        <div class="base red" id="red-base"></div>
        <div class="cell" style="grid-column: 7; grid-row: 1"></div><div class="cell" style="grid-column: 8; grid-row: 1"></div><div class="cell" style="grid-column: 9; grid-row: 1"></div>
        <div class="cell" style="grid-column: 7; grid-row: 2"></div><div class="cell" style="grid-column: 8; grid-row: 2; background:var(--red)"></div><div class="cell" style="grid-column: 9; grid-row: 2"></div>
        <div class="cell" style="grid-column: 7; grid-row: 3"></div><div class="cell" style="grid-column: 8; grid-row: 3; background:var(--red)"></div><div class="cell" style="grid-column: 9; grid-row: 3"></div>
        <div class="cell" style="grid-column: 7; grid-row: 4"></div><div class="cell" style="grid-column: 8; grid-row: 4; background:var(--red)"></div><div class="cell" style="grid-column: 9; grid-row: 4"></div>
        <div class="cell" style="grid-column: 7; grid-row: 5"></div><div class="cell" style="grid-column: 8; grid-row: 5; background:var(--red)"></div><div class="cell" style="grid-column: 9; grid-row: 5"></div>
        <div class="cell" style="grid-column: 7; grid-row: 6"></div><div class="cell" style="grid-column: 8; grid-row: 6; background:var(--red)"></div><div class="cell" style="grid-column: 9; grid-row: 6"></div>
        
        <div class="base green" id="green-base" style="grid-column: 10/16; grid-row: 1/7"></div>
        
        <div class="center"></div>

        <div class="base blue" style="grid-column: 1/7; grid-row: 10/16"></div>
        <div class="base yellow" style="grid-column: 10/16; grid-row: 10/16"></div>
    </div>

    <div class="controls">
        <div id="status-msg">पालो: <span id="p-turn" style="color:var(--green)">GREEN</span></div>
        <div id="dice-box" onclick="roll()">?</div>
        <p id="hint">पासा थिच्नुहोस्!</p>
    </div>

    <script>
        let turn = 'green';
        let diceVal = 0;
        let pSeq = [6, 6, 1, 6]; 
        let sIdx = 0;
        let canRoll = true;

        function roll() {
            if (!canRoll) return;
            const d = document.getElementById('dice-box');
            d.classList.add('rolling');
            canRoll = false;

            setTimeout(() => {
                d.classList.remove('rolling');
                
                // Prank Logic
                if (turn === 'green' && sIdx < pSeq.length) {
                    diceVal = pSeq[sIdx];
                    sIdx++;
                } else {
                    diceVal = Math.floor(Math.random() * 6) + 1;
                }

                d.innerText = diceVal;

                if (diceVal === 6 || diceVal === 1) {
                    document.getElementById('hint').innerText = "बधाई छ! फेरि पालो पाउनुभयो।";
                    canRoll = true;
                } else {
                    document.getElementById('hint').innerText = "अर्को खेलाडीको पालो!";
                    setTimeout(nextTurn, 1000);
                }
            }, 500);
        }

        function nextTurn() {
            turn = (turn === 'green') ? 'red' : 'green';
            sIdx = 0;
            const pt = document.getElementById('p-turn');
            pt.innerText = turn.toUpperCase();
            pt.style.color = `var(--${turn})`;
            canRoll = true;
        }
    </script>
</body>
</html>
