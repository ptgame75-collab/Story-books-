<!DOCTYPE html>
<html lang="ne">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ludo Pro Master</title>
    <link rel="manifest" href="manifest.json">
    <style>
        :root {
            --red: #e74c3c; --green: #2ecc71; --yellow: #f1c40f; --blue: #3498db;
            --white: #ffffff; --black: #000000;
        }
        body { 
            margin: 0; background: #f3e5ab; 
            display: flex; flex-direction: column; align-items: center; 
            font-family: 'Arial', sans-serif; padding: 20px;
        }

        /* Wood Background Wrapper */
        .game-area {
            position: relative; padding: 40px;
            background: #8d6e63; border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.5);
        }

        /* Professional Ludo Board Grid (15x15) */
        .board {
            display: grid; grid-template-columns: repeat(15, 1fr); grid-template-rows: repeat(15, 1fr);
            width: 90vw; max-width: 450px; height: 90vw; max-height: 450px;
            background: white; border: 4px solid var(--black);
        }

        .cell { border: 1px solid var(--black); box-sizing: border-box; position: relative; display: flex; align-items: center; justify-content: center; }
        
        /* Star Safe Zones as in 4249.jpg */
        .safe-zone::after { content: '★'; color: rgba(0,0,0,0.2); font-size: 1.2rem; }

        /* Bases and Home Paths */
        .base { grid-column: span 6; grid-row: span 6; border: 2px solid var(--black); position: relative; }
        .red-base { background: var(--red); }
        .green-base { background: var(--green); }
        .blue-base { background: var(--blue); }
        .yellow-base { background: var(--yellow); }

        /* Dice Boxes near Bases */
        .dice-btn {
            position: absolute; width: 50px; height: 50px; background: white;
            border: 3px solid #333; border-radius: 10px; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.8rem; font-weight: bold; z-index: 50;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3); opacity: 0.2; pointer-events: none;
            transition: 0.3s ease;
        }
        .active-dice { opacity: 1; pointer-events: auto; transform: scale(1.15); border-color: gold; box-shadow: 0 0 20px gold; }

        #dice-red { top: -15px; left: -15px; }
        #dice-green { top: -15px; right: -15px; }
        #dice-blue { bottom: -15px; left: -15px; }
        #dice-yellow { bottom: -15px; right: -15px; }

        .center-home { grid-column: 7/10; grid-row: 7/10; background: #eee; border: 2px solid black; }

        #status { margin-top: 30px; font-size: 1.3rem; font-weight: bold; color: #3e2723; text-shadow: 1px 1px white; }
    </style>
</head>
<body>

    <div class="game-area">
        <div id="dice-red" class="dice-btn" onclick="roll('red')">?</div>
        <div id="dice-green" class="dice-btn active-dice" onclick="roll('green')">?</div>
        <div id="dice-blue" class="dice-btn" onclick="roll('blue')">?</div>
        <div id="dice-yellow" class="dice-btn" onclick="roll('yellow')">?</div>

        <div class="board" id="game-board">
            </div>
    </div>

    <div id="status">पालो: <span id="p-name" style="color:var(--green)">GREEN</span></div>

    <script>
        const boardEl = document.getElementById('game-board');
        let turn = 'green';
        let prankValues = [6, 6, 1, 6];
        let prankCounter = 0;
        let isRolling = false;

        // Initialize Board to match 4249.jpg logic
        function initBoard() {
            for (let i = 0; i < 225; i++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                // Add specific coloring logic for paths later
                boardEl.appendChild(cell);
            }
        }
        initBoard();

        const diceSet = {
            red: document.getElementById('dice-red'),
            green: document.getElementById('dice-green'),
            blue: document.getElementById('dice-blue'),
            yellow: document.getElementById('dice-yellow')
        };

        function roll(color) {
            if (isRolling || turn !== color) return;
            isRolling = true;
            const d = diceSet[color];
            d.style.transform = "rotate(720deg)";

            setTimeout(() => {
                let val;
                if (turn === 'green' && prankCounter < prankValues.length) {
                    val = prankValues[prankCounter];
                    prankCounter++;
                } else {
                    val = Math.floor(Math.random() * 6) + 1;
                }

                d.innerText = val;
                d.style.transform = "rotate(0deg)";

                if (val === 6 || val === 1) {
                    isRolling = false; // Extra turn for 6 or 1
                } else {
                    setTimeout(switchTurn, 1000);
                }
            }, 600);
        }

        function switchTurn() {
            const list = ['green', 'red', 'blue', 'yellow'];
            diceSet[turn].classList.remove('active-dice');
            diceSet[turn].innerText = "?";
            
            turn = list[(list.indexOf(turn) + 1) % 4];
            prankCounter = 0;

            diceSet[turn].classList.add('active-dice');
            document.getElementById('p-name').innerText = turn.toUpperCase();
            document.getElementById('p-name').style.color = `var(--${turn})`;
            isRolling = false;
        }
    </script>
</body>
</html>
