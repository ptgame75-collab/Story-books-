<!DOCTYPE html>
<html lang="ne">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ludo Prank Pro</title>
    <link rel="manifest" href="manifest.json">
    <style>
        :root {
            --red: #e74c3c; --green: #2ecc71; --yellow: #f1c40f; --blue: #3498db;
            --white: #ffffff; --black: #2c3e50;
        }
        body { 
            margin: 0; background: #e5c29f; 
            display: flex; flex-direction: column; align-items: center; 
            font-family: sans-serif;
        }

        /* Board Styling to match 4249.jpg */
        .ludo-container {
            margin-top: 50px; position: relative; padding: 20px;
            background: #5d4037; border-radius: 10px;
        }
        .board {
            display: grid; grid-template-columns: repeat(15, 1fr); grid-template-rows: repeat(15, 1fr);
            width: 90vw; max-width: 450px; height: 90vw; max-height: 450px;
            background: white; border: 2px solid black;
        }

        .cell { border: 1px solid #000; display: flex; align-items: center; justify-content: center; font-size: 10px; }
        .base { grid-column: span 6; grid-row: span 6; border: 2px solid black; position: relative; }
        .red { background: var(--red); } .green { background: var(--green); }
        .blue { background: var(--blue); } .yellow { background: var(--yellow); }
        
        /* Star/Safe Zone markers */
        .star::after { content: '★'; color: rgba(0,0,0,0.3); font-size: 1.2rem; }

        /* Custom Dice Boxes near each base */
        .dice-box {
            position: absolute; width: 45px; height: 45px; background: white;
            border: 3px solid #333; border-radius: 8px; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.5rem; font-weight: bold; z-index: 10;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3); opacity: 0.3; pointer-events: none;
        }
        .active-dice { opacity: 1; pointer-events: auto; transform: scale(1.1); border-color: gold; }

        #dice-red { top: -20px; left: -20px; }
        #dice-green { top: -20px; right: -20px; }
        #dice-blue { bottom: -20px; left: -20px; }
        #dice-yellow { bottom: -20px; right: -20px; }

        .center { grid-column: 7/10; grid-row: 7/10; border: 1px solid black; background: #eee; }
        
        #status { margin-top: 20px; padding: 10px 20px; background: white; border-radius: 20px; font-weight: bold; }
    </style>
</head>
<body>

<div class="ludo-container">
    <div id="dice-red" class="dice-box" onclick="roll('red')">?</div>
    <div id="dice-green" class="dice-box active-dice" onclick="roll('green')">?</div>
    <div id="dice-blue" class="dice-box" onclick="roll('blue')">?</div>
    <div id="dice-yellow" class="dice-box" onclick="roll('yellow')">?</div>

    <div class="board" id="ludo-board">
        </div>
</div>

<div id="status">पालो: <span id="current-player" style="color:var(--green)">GREEN</span></div>

<script>
    // Build the grid properly to look like the image
    const board = document.getElementById('ludo-board');
    for (let i = 0; i < 225; i++) {
        let cell = document.createElement('div');
        cell.className = 'cell';
        // Logic to color specific paths based on Ludo rules
        board.appendChild(cell);
    }

    let turn = 'green';
    let prankSeq = [6, 6, 1, 6];
    let prankIdx = 0;
    let canRoll = true;

    const diceElements = {
        red: document.getElementById('dice-red'),
        green: document.getElementById('dice-green'),
        blue: document.getElementById('dice-blue'),
        yellow: document.getElementById('dice-yellow')
    };

    function roll(color) {
        if (!canRoll || turn !== color) return;
        canRoll = false;
        const d = diceElements[color];
        d.style.transform = "rotate(360deg)";

        setTimeout(() => {
            let res;
            if (turn === 'green' && prankIdx < prankSeq.length) {
                res = prankSeq[prankIdx];
                prankIdx++;
            } else {
                res = Math.floor(Math.random() * 6) + 1;
            }

            d.innerText = res;
            d.style.transform = "rotate(0deg)";

            if (res === 6 || res === 1) {
                canRoll = true; // Extra turn for 6 or 1
            } else {
                setTimeout(changeTurn, 800);
            }
        }, 500);
    }

    function changeTurn() {
        const p = ['green', 'red', 'blue', 'yellow'];
        diceElements[turn].classList.remove('active-dice');
        diceElements[turn].innerText = "?";
        
        turn = p[(p.indexOf(turn) + 1) % 4];
        prankIdx = 0;

        diceElements[turn].classList.add('active-dice');
        document.getElementById('current-player').innerText = turn.toUpperCase();
        document.getElementById('current-player').style.color = `var(--${turn})`;
        canRoll = true;
    }
</script>
</body>
</html>
